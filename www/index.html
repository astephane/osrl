<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
    <meta charset="UTF-8" />
    <title>Minimal JS front-end App Example</title>
    <!-- <script src="./run.js"></script> -->
  </head>

  <body>

    <p>See:
      <ul>
        <li><a href="https://www.codeproject.com/articles/753724/javascript-front-end-web-app-tutorial-part">https://www.codeproject.com/articles/753724/javascript-front-end-web-app-tutorial-part</li>
        <li>https://www.w3schools.com/js/DEFAULT.asp</li>
    </a></p>

    <h1>Star System Generator</h1>

    <h2>Classic Traveller</h2>

    <button type="button" onclick="foo()">Generate Random</button>

    <!-- <p id="demo"></p> -->

    <p>Alpha</p><p>Beta</p>

    <div id="console"></div>

    <h1>DOM</h1>

    <button type="button" onclick="print_elements()">Elements</button>
    <button type="button" onclick="print_nodes()">Nodes</button>

    <h2>DOM Elements</h2>
    <div id="elements"></div>

    <h2>DOM Nodes</h2>
    <div id="nodes"></div>

  </body>

  <script>

    function get_console()
    {
        return document.getElementById( "console" );
    }

    function clear_console()
    {
        console = get_console();

        // while( console.hasChildNodes() )
        // {
        // }
    }

    function print( text, console )
    {
        const paragraph = document.createElement( "p" );
        {
            const text_node = document.createTextNode( text );

            paragraph.appendChild( text_node );
        }

        document.getElementById( console ).appendChild( paragraph );
    }

    function get_type( node )
    {
        switch( node.nodeType )
        {
            case 1: return "ELEMENT_NODE"; break;
            case 2: return "ATTRIBUTE_NODE"; break;
            case 3: return "TEXT_NODE"; break;
            case 8: return "COMMENT_NODE"; break;
            case 9: return "DOCUMENT_NODE"; break;
            case 10: return "DOCUMENT_TYPE_NODE"; break;
            default: return node.nodeType.toString(); break;
        }
    }

    /*
    class record
    {
        constructor( level, node )
        {
            this.level = level;
            this.type = get_type( node.nodeType );
            this.name = node.nodeName;
            this.children = node.children.length;
        }

        toString()
        {
            return "#" + level + "-" + type + ": " + name + " (" + children + ")";
        }
    }
    */

    function explore_elements( elt )
    {
        if( elt == null )
        {
            return explore_elements( document.documentElement );
        }

        let lines = [ get_type( elt ) + ": " + elt.nodeName + " '" + elt.id + "'" ];

        for( let child of elt.children )
            lines = lines.concat( explore_elements( child ) );

        return lines;
    }

    function print_elements()
    {
        explore_elements( null ).forEach(
            ( line ) => {
                print( line, "elements" );
            }
        );
    }

    function explore_nodes( node )
    {
        if( node == null )
        {
            return explore_nodes( document.documentElement );
        }

        let lines = [ get_type( node ) + ": " + node.nodeName + " '" + node.id + "'" ];

        for( let child of node.childNodes )
            lines = lines.concat( explore_nodes( child ) );

        return lines;
    }

    function print_nodes()
    {
        explore_nodes( null ).forEach(
            ( line ) => {
                print( line, "nodes" );
            }
        );
    }

    function foo()
    {
        console = get_console();
    }

    function generate_star_system()
    {
        return "New CT star system.";
    }
  </script>

</html>
